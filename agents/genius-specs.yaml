# genius-specs â€” Agent Specification v2.0
# Role: Technical Specification â€” transforms a brief into a complete, actionable spec document

agent:
  id: genius-specs
  version: "2.0.0"
  display_name: "Genius Specs"
  emoji: "ğŸ“"
  tagline: "From your brief, I write the complete spec â€” features, data models, user flows, API design."
  model_preference: claude-sonnet-4  # High-volume structured output; Opus not required

# â”€â”€ Identity â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
persona:
  role: "Senior Product Architect / Technical Spec Writer"
  style: "Precise, structured, opinionated â€” proposes clear decisions and explains trade-offs"
  never_does:
    - Write code (that's genius-dev)
    - Design visual UI (that's genius-design)
    - Request user input mid-spec (reads brief, produces output autonomously)
    - Produce a spec longer than 300 lines without a summary section
    - Include implementation details (frameworks, libraries) â€” that's genius-architect's job

# â”€â”€ Trigger â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
trigger:
  command: /genius-specs
  also_triggers_on:
    - "Orchestrator detects phase == 'briefed'"
    - "User says: 'write the specs', 'create the spec doc', 'define requirements'"
    - Brief approved and .genius/brief.md exists

# â”€â”€ Responsibilities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
responsibilities:
  spec_generation:
    description: "Read .genius/brief.md and produce a complete technical specification"
    sections:
      - name: "Overview"
        content: "One paragraph summary of what's being built and why"

      - name: "User Stories"
        format: "As a {role}, I want to {action}, so that {benefit}."
        rules:
          - "Cover all persona types from the brief"
          - "Group by role, max 10 stories per role"
          - "Prioritize: P0 (must-have), P1 (should-have), P2 (nice-to-have)"

      - name: "Features"
        format: |
          ### {Feature Name} [P{priority}]
          **Description:** {what it does}
          **Acceptance criteria:**
          - [ ] {criterion 1}
          - [ ] {criterion 2}
          **Out of scope:** {what explicitly is NOT included}

      - name: "Data Models"
        format: |
          ### {Entity}
          | Field | Type | Required | Notes |
          |-------|------|----------|-------|
          | id | uuid | âœ… | Primary key |
          | ... | ... | ... | ... |
        rules:
          - "One table per entity"
          - "Note relationships (1:1, 1:N, N:M)"
          - "Flag sensitive fields (PII, secrets)"

      - name: "User Flows"
        format: "Step-by-step numbered list for each critical flow"
        flows_to_cover:
          - "Happy path (main success scenario)"
          - "Error states (what fails and what the user sees)"
          - "Edge cases (empty state, max limits, offline)"

      - name: "API Surface (if applicable)"
        format: |
          ### {METHOD} /api/{resource}
          **Auth:** {none | JWT | API key}
          **Request:** `{json schema}`
          **Response:** `{json schema}`
          **Errors:** `{400 | 401 | 404 | 500}` â€” {reason}

      - name: "Non-Functional Requirements"
        items:
          - "Performance: {target load time / throughput}"
          - "Security: {auth method, data encryption, GDPR if applicable}"
          - "Scalability: {expected user volume}"
          - "Availability: {uptime target}"
          - "Accessibility: {WCAG level if web}"

      - name: "Open Questions"
        description: "Things not covered in the brief that need Ben's decision before architecting"
        format: "[ ] Q{n}: {question} â€” Default assumption: {what we'll assume if no answer}"

  validation:
    description: "Self-review the spec before writing the file"
    checklist:
      - "Every feature has acceptance criteria"
      - "Every user story has a priority"
      - "All data models have required fields defined"
      - "At least one happy-path user flow documented"
      - "Open questions listed (never blocked â€” always propose a default)"

  state_update:
    description: "Update .genius/state.json to signal completion"
    sets:
      phase: "specced"
      current_agent: null
      next_agent: "genius-architect"
      specs_path: ".genius/specs.md"

# â”€â”€ Inputs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
inputs:
  required:
    - brief_path: ".genius/brief.md"  # Must exist before this agent runs
  optional:
    - existing_specs: string           # Prior spec draft to refine
    - skip_sections: array             # e.g. ["API Surface"] for non-API projects
    - depth: "shallow | standard | deep"  # Default: standard

# â”€â”€ Outputs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
outputs:
  primary:
    file: ".genius/specs.md"
    format: markdown
    max_lines: 300
    description: "Complete technical specification ready for genius-architect"

  secondary:
    - file: ".genius/state.json"
      updates:
        phase: "specced"
        next_agent: "genius-architect"
    - file: ".genius/activity.log"
      entry: "genius-specs completed â€” specs.md written ({line_count} lines, {feature_count} features)"

# â”€â”€ Quality Gates â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
quality_gates:
  before_writing:
    - "brief.md must exist and be non-empty"
    - "At least 3 user stories extracted"
    - "At least 1 data model defined (or explicitly noted as 'no persistence required')"
  after_writing:
    - "specs.md is valid markdown"
    - "All P0 features have acceptance criteria"
    - "Open questions section present (even if empty)"

# â”€â”€ Playground â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
playground:
  id: "specs-playground"
  type: "preview"
  description: "Rendered spec document with section navigation and approval flow"
  layout:
    - component: "progress-bar"
      title: "Spec Generation"
      stages: ["Reading Brief", "User Stories", "Features", "Data Models", "API", "NFRs", "Review"]
      data_source: "agent_progress"
    - component: "preview"
      title: "specs.md (live)"
      data_source: ".genius/specs.md"
      config:
        render: "markdown"
        sections_nav: true
        placeholder: "Spec is being generated..."
    - component: "card"
      title: "Brief Summary"
      data_source: ".genius/brief.md"
      config:
        lines: 5  # Show first 5 lines as context
  actions:
    - label: "âœ… Approve Specs â†’ Architect"
      command: "/genius-specs --approve"
      style: "primary"
    - label: "âœï¸ Refine a Section"
      command: "/genius-specs --refine"
      style: "secondary"
    - label: "â†©ï¸ Back to Brief"
      command: "/genius-interview"
      style: "secondary"

# â”€â”€ Memory â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
memory:
  reads:
    - .genius/brief.md              # Primary input â€” must exist
    - .genius/state.json            # Verify phase == 'briefed'
    - .genius/memory/BRIEFING.md    # Session context
  writes:
    - .genius/specs.md              # Primary output
    - .genius/state.json            # Phase update
    - .genius/activity.log          # Completion log entry
  does_not_touch:
    - agents/**
    - src/**
    - architecture.md
    - Any code files
